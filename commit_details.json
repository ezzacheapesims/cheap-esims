[
    {
        "sha":  "c92eafdf60e2eb043edcb9fb0d96bb3738ce671c",
        "filename":  "IMPROVEMENT_CHECKLIST.md",
        "status":  "modified",
        "additions":  5,
        "deletions":  5,
        "changes":  10,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/IMPROVEMENT_CHECKLIST.md",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/IMPROVEMENT_CHECKLIST.md",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/IMPROVEMENT_CHECKLIST.md?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -40,11 +40,11 @@\n \n ### Navigation \u0026 User Flow\n - [x] **Add \"My eSIMs\" to main navigation** - When user is signed in (✅ Available in NavigationUserMenu dropdown)\n-- [ ] **Add global search to navbar** - Search functionality on all pages\n-- [ ] **Add breadcrumbs to all pages** - Better navigation context\n-- [ ] **Add \"Recently Viewed\" or \"Continue Shopping\"** - On account pages\n-- [ ] **Add keyboard navigation support** - Full keyboard accessibility\n-- [ ] **Add account dropdown preview** - Show balance/status in user menu\n+- [x] **Add global search to navbar** - Search functionality on all pages (✅ Implemented - Dropdown search with backend API endpoint)\n+- [x] **Add breadcrumbs to all pages** - Better navigation context (✅ Implemented - Added to Plans, Account, My eSIMs, Checkout pages)\n+- [x] **Add \"Recently Viewed\" or \"Continue Shopping\"** - On account pages (✅ Implemented - Both features added with localStorage tracking)\n+- [x] **Add keyboard navigation support** - Full keyboard accessibility (✅ Implemented - Ctrl+K for search, Ctrl+H for home, Ctrl+M for My eSIMs, Ctrl+A for Account)\n+- [x] **Add account dropdown preview** - Show balance/status in user menu (✅ Implemented - Shows active eSIM count badge)\n \n ### Plan Browsing \u0026 Discovery\n - [ ] **Show starting price on country cards** - \"From $X\" pricing"
    },
    {
        "sha":  "49390a20bd11eac84440a1566ddc8f72b1b1c3ee",
        "filename":  "apps/backend/src/modules/esim/esim.controller.ts",
        "status":  "modified",
        "additions":  8,
        "deletions":  0,
        "changes":  8,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fbackend%2Fsrc%2Fmodules%2Fesim%2Fesim.controller.ts",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fbackend%2Fsrc%2Fmodules%2Fesim%2Fesim.controller.ts",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fbackend%2Fsrc%2Fmodules%2Fesim%2Fesim.controller.ts?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -29,6 +29,14 @@ export class EsimController {\n     return data.locationList;\n   }\n \n+  @Get(\u0027search\u0027)\n+  async search(@Query(\u0027q\u0027) query: string) {\n+    if (!query || query.trim().length \u003c 2) {\n+      return { countries: [], plans: [] };\n+    }\n+    return this.esimService.search(query.trim());\n+  }\n+\n   @Get(\u0027countries/:code/plans\u0027)\n   async getPlans(@Param(\u0027code\u0027) code: string) {\n     const data = await this.esimService.getPackages(code);"
    },
    {
        "sha":  "f0f459751e839df50e4d396211db87bbfa0c1ab7",
        "filename":  "apps/backend/src/modules/esim/esim.service.ts",
        "status":  "modified",
        "additions":  23,
        "deletions":  0,
        "changes":  23,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fbackend%2Fsrc%2Fmodules%2Fesim%2Fesim.service.ts",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fbackend%2Fsrc%2Fmodules%2Fesim%2Fesim.service.ts",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fbackend%2Fsrc%2Fmodules%2Fesim%2Fesim.service.ts?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -168,6 +168,29 @@ export class EsimService {\n     };\n   }\n \n+  // ---- SEARCH COUNTRIES AND PLANS ----\n+  async search(query: string) {\n+    const queryLower = query.toLowerCase();\n+    const locations = await this.getLocations();\n+    const allLocations = locations.locationList || [];\n+    \n+    // Search countries (type 1 only)\n+    const matchingCountries = allLocations\n+      .filter((loc: any) =\u003e loc.type === 1 \u0026\u0026 loc.name.toLowerCase().includes(queryLower))\n+      .slice(0, 8) // Limit to 8 results\n+      .map((loc: any) =\u003e ({\n+        code: loc.code,\n+        name: loc.name,\n+        type: loc.type,\n+        locationLogo: loc.locationLogo,\n+      }));\n+\n+    return {\n+      countries: matchingCountries,\n+      plans: [], // Plans search can be added later if needed\n+    };\n+  }\n+\n   // ---- 2. GET PACKAGES FOR A COUNTRY ----\n   async getPackages(locationCode: string) {\n     const result = await this.esimAccess.packages.getPackagesByLocation(locationCode);"
    },
    {
        "sha":  "ca455e3ba7875a0be1a630feeaef736ecfb98792",
        "filename":  "apps/backend/src/modules/orders/orders.controller.ts",
        "status":  "modified",
        "additions":  18,
        "deletions":  18,
        "changes":  36,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fbackend%2Fsrc%2Fmodules%2Forders%2Forders.controller.ts",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fbackend%2Fsrc%2Fmodules%2Forders%2Forders.controller.ts",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fbackend%2Fsrc%2Fmodules%2Forders%2Forders.controller.ts?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -391,6 +391,24 @@ export class OrdersController {\n           // Found orderId in metadata - this is the new flow\n           order = await this.prisma.order.findUnique({\n             where: { id: orderIdFromMetadata },\n+      select: {\n+        id: true,\n+        amountCents: true,\n+        currency: true,\n+        displayCurrency: true,\n+        displayAmountCents: true,\n+        status: true,\n+        paymentMethod: true,\n+      },\n+    });\n+        } else {\n+          // No orderId in metadata - try legacy flow\n+          // Get payment_intent from session\n+        const paymentIntentId = session.payment_intent as string;\n+        \n+        if (paymentIntentId) {\n+          order = await this.prisma.order.findUnique({\n+            where: { paymentRef: paymentIntentId },\n             select: {\n               id: true,\n               amountCents: true,\n@@ -401,24 +419,6 @@ export class OrdersController {\n               paymentMethod: true,\n             },\n           });\n-        } else {\n-          // No orderId in metadata - try legacy flow\n-          // Get payment_intent from session\n-          const paymentIntentId = session.payment_intent as string;\n-          \n-          if (paymentIntentId) {\n-            order = await this.prisma.order.findUnique({\n-              where: { paymentRef: paymentIntentId },\n-              select: {\n-                id: true,\n-                amountCents: true,\n-                currency: true,\n-                displayCurrency: true,\n-                displayAmountCents: true,\n-                status: true,\n-                paymentMethod: true,\n-              },\n-            });\n           }\n         }\n       } catch (error) {"
    },
    {
        "sha":  "88b79b51e78e9b558b064bc8ccd6fdd663d354f4",
        "filename":  "apps/web/app/account/page.tsx",
        "status":  "modified",
        "additions":  21,
        "deletions":  6,
        "changes":  27,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Faccount%2Fpage.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Faccount%2Fpage.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fapp%2Faccount%2Fpage.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -4,8 +4,10 @@ import { useEffect, useState } from \"react\";\n import { useUser } from \"@clerk/nextjs\";\n import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n import { Button } from \"@/components/ui/button\";\n+import { Breadcrumbs } from \"@/components/Breadcrumbs\";\n+import { RecentlyViewed } from \"@/components/RecentlyViewed\";\n import Link from \"next/link\";\n-import { DollarSign, ArrowRight, Wallet, MessageSquare } from \"lucide-react\";\n+import { DollarSign, ArrowRight, Wallet, MessageSquare, ShoppingBag } from \"lucide-react\";\n import { Skeleton } from \"@/components/ui/skeleton\";\n import { useCurrency } from \"@/components/providers/CurrencyProvider\";\n import { safeFetch } from \"@/lib/safe-fetch\";\n@@ -52,9 +54,19 @@ export default function AccountPage() {\n \n   return (\n     \u003cdiv className=\"container mx-auto px-4 sm:px-6 py-6 sm:py-8 space-y-6 sm:space-y-8\"\u003e\n-      \u003cdiv\u003e\n-        \u003ch1 className=\"text-3xl font-bold text-white mb-2\"\u003eAccount\u003c/h1\u003e\n-        \u003cp className=\"text-[var(--voyage-muted)]\"\u003eManage your account settings\u003c/p\u003e\n+      \u003cBreadcrumbs /\u003e\n+      \n+      \u003cdiv className=\"flex items-center justify-between\"\u003e\n+        \u003cdiv\u003e\n+          \u003ch1 className=\"text-3xl font-bold text-white mb-2\"\u003eAccount\u003c/h1\u003e\n+          \u003cp className=\"text-[var(--voyage-muted)]\"\u003eManage your account settings\u003c/p\u003e\n+        \u003c/div\u003e\n+        \u003cLink href=\"/\"\u003e\n+          \u003cButton variant=\"outline\" className=\"border-[var(--voyage-border)] bg-[var(--voyage-card)] text-white hover:bg-[var(--voyage-bg-light)] hover:text-white hover:border-[var(--voyage-accent)]\"\u003e\n+            \u003cShoppingBag className=\"h-4 w-4 mr-2\" /\u003e\n+            Continue Shopping\n+          \u003c/Button\u003e\n+        \u003c/Link\u003e\n       \u003c/div\u003e\n \n       {/* V-Cash Balance Card */}\n@@ -77,7 +89,7 @@ export default function AccountPage() {\n             V-Cash is store credit you can use on Voyage purchases. Get V-Cash from refunds or affiliate earnings.\n           \u003c/p\u003e\n           \u003cLink href=\"/account/vcash\" className=\"inline-block\"\u003e\n-            \u003cButton variant=\"outline\" className=\"border-[var(--voyage-border)] w-full sm:w-auto\"\u003e\n+            \u003cButton variant=\"outline\" className=\"border-[var(--voyage-border)] bg-[var(--voyage-card)] text-white hover:bg-[var(--voyage-bg-light)] hover:text-white hover:border-[var(--voyage-accent)] w-full sm:w-auto\"\u003e\n               View V-Cash Details\n               \u003cArrowRight className=\"h-4 w-4 ml-2\" /\u003e\n             \u003c/Button\u003e\n@@ -121,7 +133,7 @@ export default function AccountPage() {\n           \u003c/p\u003e\n           \u003cdiv className=\"flex flex-col sm:flex-row gap-3\"\u003e\n             \u003cLink href=\"/account/support\" className=\"w-full sm:w-auto\"\u003e\n-              \u003cButton variant=\"outline\" className=\"border-[var(--voyage-border)] w-full sm:w-auto\"\u003e\n+              \u003cButton variant=\"outline\" className=\"border-[var(--voyage-border)] bg-[var(--voyage-card)] text-white hover:bg-[var(--voyage-bg-light)] hover:text-white hover:border-[var(--voyage-accent)] w-full sm:w-auto\"\u003e\n                 View My Tickets\n                 \u003cArrowRight className=\"h-4 w-4 ml-2\" /\u003e\n               \u003c/Button\u003e\n@@ -134,6 +146,9 @@ export default function AccountPage() {\n           \u003c/div\u003e\n         \u003c/CardContent\u003e\n       \u003c/Card\u003e\n+\n+      {/* Recently Viewed */}\n+      \u003cRecentlyViewed /\u003e\n     \u003c/div\u003e\n   );\n }"
    },
    {
        "sha":  "9640e1d39b0e58e9580253ec737166c928616d82",
        "filename":  "apps/web/app/checkout/[orderId]/page.tsx",
        "status":  "modified",
        "additions":  2,
        "deletions":  0,
        "changes":  2,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Fcheckout%2F%5BorderId%5D%2Fpage.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Fcheckout%2F%5BorderId%5D%2Fpage.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fapp%2Fcheckout%2F%5BorderId%5D%2Fpage.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -5,6 +5,7 @@ import { useRouter } from \"next/navigation\";\n import { useUser } from \"@clerk/nextjs\";\n import { CheckoutProgress } from \"@/components/checkout/CheckoutProgress\";\n import { EmailPreview } from \"@/components/checkout/EmailPreview\";\n+import { Breadcrumbs } from \"@/components/Breadcrumbs\";\n import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n import { Button } from \"@/components/ui/button\";\n import { Mail, CreditCard, Loader2, Tag, X } from \"lucide-react\";\n@@ -360,6 +361,7 @@ export default function CheckoutPage({ params }: { params: { orderId: string } }\n \n   return (\n     \u003cdiv className=\"max-w-6xl mx-auto space-y-8\"\u003e\n+      \u003cBreadcrumbs /\u003e\n       {/* Progress Indicator */}\n       \u003cdiv className=\"bg-[var(--voyage-card)] border border-[var(--voyage-border)] rounded-2xl p-6\"\u003e\n         \u003cCheckoutProgress currentStep={currentStep} /\u003e"
    },
    {
        "sha":  "88d8ae1d104099e6d8f088c8fc088dc3d3d6c30e",
        "filename":  "apps/web/app/checkout/success/page.tsx",
        "status":  "modified",
        "additions":  2,
        "deletions":  0,
        "changes":  2,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Fcheckout%2Fsuccess%2Fpage.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Fcheckout%2Fsuccess%2Fpage.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fapp%2Fcheckout%2Fsuccess%2Fpage.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -7,6 +7,7 @@ import Link from \"next/link\";\n import Script from \"next/script\";\n import { Button } from \"@/components/ui/button\";\n import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n+import { Breadcrumbs } from \"@/components/Breadcrumbs\";\n import { CheckCircle2, QrCode, Mail, ExternalLink, ArrowRight, Smartphone, Download, Clock, LogIn, UserPlus, AlertCircle, Link as LinkIcon, Loader2 } from \"lucide-react\";\n import { safeFetch } from \"@/lib/safe-fetch\";\n import { formatCurrency } from \"@/lib/utils\";\n@@ -186,6 +187,7 @@ function SuccessContent() {\n       )}\n \n       \u003cdiv className=\"max-w-4xl mx-auto space-y-8\"\u003e\n+        \u003cBreadcrumbs /\u003e\n         {/* Success Header */}\n         \u003cdiv className=\"flex flex-col items-center text-center space-y-4\"\u003e\n           \u003cdiv className=\"h-20 w-20 rounded-full bg-green-500/20 flex items-center justify-center\"\u003e"
    },
    {
        "sha":  "3680f2dd34b370f45154e94fd901ba383f90a42b",
        "filename":  "apps/web/app/globals.css",
        "status":  "modified",
        "additions":  88,
        "deletions":  0,
        "changes":  88,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Fglobals.css",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Fglobals.css",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fapp%2Fglobals.css?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -117,3 +117,91 @@\n   );\n   background-size: 1000px 100%;\n }\n+\n+/* Clerk UI Dark Theme Overrides - Comprehensive */\n+.cl-userButtonPopoverCard,\n+[class*=\"cl-userButtonPopoverCard\"] {\n+  background-color: var(--voyage-card) !important;\n+  border-color: var(--voyage-border) !important;\n+}\n+\n+.cl-userButtonPopoverHeader,\n+[class*=\"cl-userButtonPopoverHeader\"] {\n+  background-color: var(--voyage-card) !important;\n+  border-bottom-color: var(--voyage-border) !important;\n+}\n+\n+.cl-userButtonPopoverHeaderTitle,\n+[class*=\"cl-userButtonPopoverHeaderTitle\"],\n+.cl-userButtonPopoverHeaderTitle * {\n+  color: white !important;\n+}\n+\n+.cl-userButtonPopoverHeaderSubtitle,\n+[class*=\"cl-userButtonPopoverHeaderSubtitle\"],\n+.cl-userButtonPopoverHeaderSubtitle * {\n+  color: var(--voyage-muted) !important;\n+}\n+\n+.cl-userButtonPopoverActions,\n+[class*=\"cl-userButtonPopoverActions\"] {\n+  background-color: var(--voyage-card) !important;\n+}\n+\n+.cl-userButtonPopoverActionButton,\n+[class*=\"cl-userButtonPopoverActionButton\"] {\n+  color: white !important;\n+  background-color: transparent !important;\n+}\n+\n+.cl-userButtonPopoverActionButton:hover,\n+[class*=\"cl-userButtonPopoverActionButton\"]:hover {\n+  background-color: var(--voyage-bg-light) !important;\n+  color: white !important;\n+}\n+\n+.cl-userButtonPopoverActionButtonText,\n+[class*=\"cl-userButtonPopoverActionButtonText\"],\n+.cl-userButtonPopoverActionButtonText * {\n+  color: white !important;\n+}\n+\n+.cl-userButtonPopoverActionButtonIcon,\n+[class*=\"cl-userButtonPopoverActionButtonIcon\"],\n+.cl-userButtonPopoverActionButtonIcon * {\n+  color: var(--voyage-muted) !important;\n+}\n+\n+.cl-userButtonPopoverFooter,\n+[class*=\"cl-userButtonPopoverFooter\"] {\n+  background-color: var(--voyage-card) !important;\n+  border-top-color: var(--voyage-border) !important;\n+}\n+\n+.cl-userButtonPopoverFooter *,\n+[class*=\"cl-userButtonPopoverFooter\"] * {\n+  color: var(--voyage-muted) !important;\n+}\n+\n+/* Force dark theme for all Clerk popover elements */\n+[class*=\"cl-userButtonPopover\"] {\n+  background-color: var(--voyage-card) !important;\n+  color: white !important;\n+}\n+\n+[class*=\"cl-userButtonPopover\"] * {\n+  color: white !important;\n+}\n+\n+/* Specific overrides for text elements */\n+[class*=\"cl-userButtonPopover\"] p,\n+[class*=\"cl-userButtonPopover\"] span,\n+[class*=\"cl-userButtonPopover\"] div {\n+  color: white !important;\n+}\n+\n+/* Override for muted text */\n+[class*=\"cl-userButtonPopover\"] [class*=\"muted\"],\n+[class*=\"cl-userButtonPopover\"] [class*=\"subtitle\"] {\n+  color: var(--voyage-muted) !important;\n+}"
    },
    {
        "sha":  "0a12e367965b83637c5da3ef8087453d881610a0",
        "filename":  "apps/web/app/layout.tsx",
        "status":  "modified",
        "additions":  32,
        "deletions":  14,
        "changes":  46,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Flayout.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Flayout.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fapp%2Flayout.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -19,6 +19,7 @@ import { ErrorToastProvider } from \"@/components/ui/error-toast-provider\";\n import { Toaster } from \"@/components/ui/toaster\";\n import { Footer } from \"@/components/Footer\";\n import { Navbar } from \"@/components/Navbar\";\n+import { KeyboardNavigationProvider } from \"@/components/KeyboardNavigationProvider\";\n \n const inter = Inter({ subsets: [\"latin\"] });\n \n@@ -34,7 +35,22 @@ export default function RootLayout({\n }\u003e) {\n   return (\n     \u003cErrorBoundary\u003e\n-      \u003cClerkProvider\u003e\n+      \u003cClerkProvider\n+        appearance={{\n+          baseTheme: \"dark\",\n+          elements: {\n+            userButtonPopoverCard: \"bg-[var(--voyage-card)] border-[var(--voyage-border)]\",\n+            userButtonPopoverHeader: \"bg-[var(--voyage-card)] border-b border-[var(--voyage-border)]\",\n+            userButtonPopoverHeaderTitle: \"text-white\",\n+            userButtonPopoverHeaderSubtitle: \"text-[var(--voyage-muted)]\",\n+            userButtonPopoverActions: \"bg-[var(--voyage-card)]\",\n+            userButtonPopoverActionButton: \"text-white hover:bg-[var(--voyage-bg-light)] hover:text-white\",\n+            userButtonPopoverActionButtonText: \"text-white\",\n+            userButtonPopoverActionButtonIcon: \"text-[var(--voyage-muted)]\",\n+            userButtonPopoverFooter: \"bg-[var(--voyage-card)] border-t border-[var(--voyage-border)]\",\n+          },\n+        }}\n+      \u003e\n         \u003cCurrencyProvider\u003e\n           \u003cErrorToastProvider\u003e\n             \u003chtml lang=\"en\"\u003e\n@@ -54,19 +70,21 @@ export default function RootLayout({\n                 \u003c/Script\u003e\n                 \u003cdiv className=\"fixed inset-0 bg-gradient-to-br from-[var(--voyage-bg)] via-[var(--voyage-bg)] to-[#051020] -z-10\" /\u003e\n                 \n-                \u003cdiv className=\"flex flex-col min-h-screen\"\u003e\n-                  \u003cNavbar /\u003e\n-                  \n-                  \u003cmain className=\"flex-grow max-w-6xl mx-auto px-6 py-10 w-full\"\u003e\n-                     \u003cReferralTracker /\u003e\n-                     \u003cSignedIn\u003e\n-                       \u003cSignupTracker /\u003e\n-                     \u003c/SignedIn\u003e\n-                     {children}\n-                  \u003c/main\u003e\n-                  \n-                  \u003cFooter /\u003e\n-                \u003c/div\u003e\n+                \u003cKeyboardNavigationProvider\u003e\n+                  \u003cdiv className=\"flex flex-col min-h-screen\"\u003e\n+                    \u003cNavbar /\u003e\n+                    \n+                    \u003cmain className=\"flex-grow max-w-6xl mx-auto px-6 py-10 w-full\"\u003e\n+                       \u003cReferralTracker /\u003e\n+                       \u003cSignedIn\u003e\n+                         \u003cSignupTracker /\u003e\n+                       \u003c/SignedIn\u003e\n+                       {children}\n+                    \u003c/main\u003e\n+                    \n+                    \u003cFooter /\u003e\n+                  \u003c/div\u003e\n+                \u003c/KeyboardNavigationProvider\u003e\n                 \u003cToaster /\u003e\n                 \u003cLiveChat /\u003e\n               \u003c/body\u003e"
    },
    {
        "sha":  "84382597411a80e0eb5bd3b892fcefad834b4ae1",
        "filename":  "apps/web/app/my-esims/page.tsx",
        "status":  "modified",
        "additions":  37,
        "deletions":  24,
        "changes":  61,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Fmy-esims%2Fpage.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Fmy-esims%2Fpage.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fapp%2Fmy-esims%2Fpage.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -6,8 +6,9 @@ import { useRouter } from \"next/navigation\";\n import { Card, CardContent, CardHeader } from \"@/components/ui/card\";\n import { Badge } from \"@/components/ui/badge\";\n import { Button } from \"@/components/ui/button\";\n+import { Breadcrumbs } from \"@/components/Breadcrumbs\";\n import { Skeleton } from \"@/components/ui/skeleton\";\n-import { QrCode, Signal, RefreshCw, Calendar, HardDrive, Download, Copy, CheckCircle2 } from \"lucide-react\";\n+import { QrCode, Signal, RefreshCw, Calendar, HardDrive, Download, Copy, CheckCircle2, ShoppingBag } from \"lucide-react\";\n import Image from \"next/image\";\n import Link from \"next/link\";\n import { safeFetch } from \"@/lib/safe-fetch\";\n@@ -157,31 +158,43 @@ export default function MyEsimsPage() {\n \n   return (\n     \u003cdiv className=\"space-y-8\"\u003e\n+      \u003cBreadcrumbs /\u003e\n+      \n       \u003cdiv className=\"flex items-center justify-between\"\u003e\n-        \u003ch1 className=\"text-3xl font-bold text-white\"\u003eMy eSIMs\u003c/h1\u003e\n-        \u003cButton \n-          variant=\"outline\" \n-          size=\"icon\" \n-          className=\"border-[var(--voyage-border)] bg-[var(--voyage-card)] text-white hover:bg-[var(--voyage-accent)] hover:border-[var(--voyage-accent)]\"\n-          onClick={async () =\u003e {\n-            setLoading(true);\n-            const userEmail = user?.primaryEmailAddress?.emailAddress;\n-            if (userEmail) {\n-              try {\n-                const data = await safeFetch\u003cEsimProfile[]\u003e(\n-                  `${process.env.NEXT_PUBLIC_API_URL}/user/esims?email=${encodeURIComponent(userEmail)}`,\n-                  { showToast: false }\n-                );\n-                setEsims(data || []);\n-              } catch (e) {\n-                console.error(\u0027[MY-ESIMS] Refresh error:\u0027, e);\n+        \u003cdiv\u003e\n+          \u003ch1 className=\"text-3xl font-bold text-white\"\u003eMy eSIMs\u003c/h1\u003e\n+        \u003c/div\u003e\n+        \u003cdiv className=\"flex items-center gap-3\"\u003e\n+          \u003cLink href=\"/\"\u003e\n+            \u003cButton variant=\"outline\" className=\"border-[var(--voyage-border)] bg-[var(--voyage-card)] text-white hover:bg-[var(--voyage-bg-light)] hover:text-white hover:border-[var(--voyage-accent)]\"\u003e\n+              \u003cShoppingBag className=\"h-4 w-4 mr-2\" /\u003e\n+              Continue Shopping\n+            \u003c/Button\u003e\n+          \u003c/Link\u003e\n+          \u003cButton \n+            variant=\"outline\" \n+            size=\"icon\" \n+            className=\"border-[var(--voyage-border)] bg-[var(--voyage-card)] text-white hover:bg-[var(--voyage-accent)] hover:border-[var(--voyage-accent)]\"\n+            onClick={async () =\u003e {\n+              setLoading(true);\n+              const userEmail = user?.primaryEmailAddress?.emailAddress;\n+              if (userEmail) {\n+                try {\n+                  const data = await safeFetch\u003cEsimProfile[]\u003e(\n+                    `${process.env.NEXT_PUBLIC_API_URL}/user/esims?email=${encodeURIComponent(userEmail)}`,\n+                    { showToast: false }\n+                  );\n+                  setEsims(data || []);\n+                } catch (e) {\n+                  console.error(\u0027[MY-ESIMS] Refresh error:\u0027, e);\n+                }\n               }\n-            }\n-            setLoading(false);\n-          }}\n-        \u003e\n-           \u003cRefreshCw className={`h-4 w-4 ${loading ? \u0027animate-spin\u0027 : \u0027\u0027}`} /\u003e\n-        \u003c/Button\u003e\n+              setLoading(false);\n+            }}\n+          \u003e\n+             \u003cRefreshCw className={`h-4 w-4 ${loading ? \u0027animate-spin\u0027 : \u0027\u0027}`} /\u003e\n+          \u003c/Button\u003e\n+        \u003c/div\u003e\n       \u003c/div\u003e\n \n       {loading ? ("
    },
    {
        "sha":  "651080a010f359f8d0cb0785455ac2539dd45b41",
        "filename":  "apps/web/app/plans/[id]/page.tsx",
        "status":  "modified",
        "additions":  13,
        "deletions":  0,
        "changes":  13,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Fplans%2F%5Bid%5D%2Fpage.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fapp%2Fplans%2F%5Bid%5D%2Fpage.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fapp%2Fplans%2F%5Bid%5D%2Fpage.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -6,10 +6,12 @@ import { ArrowLeft } from \"lucide-react\";\n import { Button } from \"@/components/ui/button\";\n import { PlanDetails } from \"@/components/PlanDetails\";\n import { PlanDetailsSkeleton } from \"@/components/skeletons\";\n+import { Breadcrumbs } from \"@/components/Breadcrumbs\";\n import { safeFetch } from \"@/lib/safe-fetch\";\n import { useParams, useRouter } from \"next/navigation\";\n import { fetchDiscounts } from \"@/lib/admin-discounts\";\n import { getSlugFromCode } from \"@/lib/country-slugs\";\n+import { addToRecentlyViewed } from \"@/lib/recently-viewed\";\n \n export default function PlanPage() {\n   const params = useParams();\n@@ -31,6 +33,15 @@ export default function PlanPage() {\n       try {\n         const data = await safeFetch\u003cany\u003e(`${apiUrl}/plans/${id}`, { showToast: false });\n         setPlan(data);\n+        \n+        // Track recently viewed\n+        if (data?.name) {\n+          addToRecentlyViewed({\n+            id: id,\n+            name: data.name,\n+            href: `/plans/${id}`,\n+          });\n+        }\n       } catch (error) {\n         console.error(\"Failed to fetch plan:\", error);\n       } finally {\n@@ -88,6 +99,8 @@ export default function PlanPage() {\n \n   return (\n     \u003cdiv className=\"space-y-6\"\u003e\n+      \u003cBreadcrumbs /\u003e\n+      \n       {useBackNavigation ? (\n         \u003cButton \n           variant=\"ghost\" "
    },
    {
        "sha":  "a83bb3ba3455787457c1880101c6614c14c6b0cc",
        "filename":  "apps/web/components/Breadcrumbs.tsx",
        "status":  "added",
        "additions":  122,
        "deletions":  0,
        "changes":  122,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FBreadcrumbs.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FBreadcrumbs.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fcomponents%2FBreadcrumbs.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -0,0 +1,122 @@\n+\"use client\";\n+\n+import { usePathname } from \"next/navigation\";\n+import Link from \"next/link\";\n+import { ChevronRight, Home } from \"lucide-react\";\n+import { cn } from \"@/lib/utils\";\n+\n+interface BreadcrumbItem {\n+  label: string;\n+  href: string;\n+}\n+\n+interface BreadcrumbsProps {\n+  items?: BreadcrumbItem[];\n+  className?: string;\n+}\n+\n+export function Breadcrumbs({ items, className }: BreadcrumbsProps) {\n+  const pathname = usePathname();\n+\n+  // Auto-generate breadcrumbs from pathname if items not provided\n+  const breadcrumbs: BreadcrumbItem[] = items || generateBreadcrumbs(pathname);\n+\n+  if (breadcrumbs.length \u003c= 1) return null; // Don\u0027t show breadcrumbs if only home\n+\n+  return (\n+    \u003cnav\n+      aria-label=\"Breadcrumb\"\n+      className={cn(\"flex items-center gap-2 text-sm\", className)}\n+    \u003e\n+      \u003col className=\"flex items-center gap-2 flex-wrap\"\u003e\n+        {breadcrumbs.map((item, index) =\u003e {\n+          const isLast = index === breadcrumbs.length - 1;\n+          return (\n+            \u003cli key={item.href} className=\"flex items-center gap-2\"\u003e\n+              {index === 0 ? (\n+                \u003cLink\n+                  href={item.href}\n+                  className={cn(\n+                    \"flex items-center gap-1 transition-colors\",\n+                    isLast\n+                      ? \"text-[var(--voyage-text)]\"\n+                      : \"text-[var(--voyage-muted)] hover:text-white\"\n+                  )}\n+                \u003e\n+                  \u003cHome className=\"h-4 w-4\" /\u003e\n+                  \u003cspan className=\"sr-only\"\u003eHome\u003c/span\u003e\n+                \u003c/Link\u003e\n+              ) : (\n+                \u003c\u003e\n+                  \u003cChevronRight className=\"h-4 w-4 text-[var(--voyage-muted)]\" /\u003e\n+                  {isLast ? (\n+                    \u003cspan className=\"text-[var(--voyage-text)] font-medium\"\u003e\n+                      {item.label}\n+                    \u003c/span\u003e\n+                  ) : (\n+                    \u003cLink\n+                      href={item.href}\n+                      className=\"text-[var(--voyage-muted)] hover:text-white transition-colors\"\n+                    \u003e\n+                      {item.label}\n+                    \u003c/Link\u003e\n+                  )}\n+                \u003c/\u003e\n+              )}\n+            \u003c/li\u003e\n+          );\n+        })}\n+      \u003c/ol\u003e\n+    \u003c/nav\u003e\n+  );\n+}\n+\n+function generateBreadcrumbs(pathname: string): BreadcrumbItem[] {\n+  const crumbs: BreadcrumbItem[] = [{ label: \"Home\", href: \"/\" }];\n+\n+  // Skip home page\n+  if (pathname === \"/\") return crumbs;\n+\n+  const segments = pathname.split(\"/\").filter(Boolean);\n+\n+  segments.forEach((segment, index) =\u003e {\n+    const href = \"/\" + segments.slice(0, index + 1).join(\"/\");\n+    let label = segment;\n+\n+    // Format labels\n+    label = label\n+      .split(\"-\")\n+      .map((word) =\u003e word.charAt(0).toUpperCase() + word.slice(1))\n+      .join(\" \");\n+\n+    // Special cases\n+    if (segment === \"my-esims\") label = \"My eSIMs\";\n+    if (segment === \"account\") label = \"Account\";\n+    if (segment === \"checkout\") label = \"Checkout\";\n+    if (segment === \"support\") label = \"Support\";\n+    if (segment === \"admin\") label = \"Admin\";\n+    if (segment === \"plans\") label = \"Plans\";\n+    if (segment === \"countries\") label = \"Countries\";\n+    if (segment === \"regions\") label = \"Regions\";\n+    if (segment === \"affiliate\") label = \"Affiliate\";\n+    if (segment === \"vcash\") label = \"V-Cash\";\n+    if (segment === \"topup\") label = \"Top-up\";\n+    if (segment === \"orders\") label = \"Orders\";\n+\n+    // For dynamic routes, try to get a better label\n+    if (segment.match(/^[a-f0-9-]{36}$/i)) {\n+      // UUID - could be order ID, eSIM ID, etc.\n+      const parent = segments[index - 1];\n+      if (parent === \"orders\") label = \"Order Details\";\n+      if (parent === \"esims\" || parent === \"my-esims\") label = \"eSIM Details\";\n+      if (parent === \"users\") label = \"User Details\";\n+      if (parent === \"support\") label = \"Ticket Details\";\n+    }\n+\n+    crumbs.push({ label, href });\n+  });\n+\n+  return crumbs;\n+}\n+\n+"
    },
    {
        "sha":  "d2f80f3d46c86b9ec7db321367b5378b8bd1ff5b",
        "filename":  "apps/web/components/KeyboardNavigationProvider.tsx",
        "status":  "added",
        "additions":  10,
        "deletions":  0,
        "changes":  10,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FKeyboardNavigationProvider.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FKeyboardNavigationProvider.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fcomponents%2FKeyboardNavigationProvider.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -0,0 +1,10 @@\n+\"use client\";\n+\n+import { useCommonKeyboardShortcuts } from \"@/hooks/useKeyboardNavigation\";\n+\n+export function KeyboardNavigationProvider({ children }: { children: React.ReactNode }) {\n+  useCommonKeyboardShortcuts();\n+  return \u003c\u003e{children}\u003c/\u003e;\n+}\n+\n+"
    },
    {
        "sha":  "aa9aa0caf644a0b58c275141e54ccb74cf5d6de2",
        "filename":  "apps/web/components/Navbar.tsx",
        "status":  "modified",
        "additions":  83,
        "deletions":  38,
        "changes":  121,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FNavbar.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FNavbar.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fcomponents%2FNavbar.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -5,6 +5,7 @@ import Link from \"next/link\";\n import { usePathname } from \"next/navigation\";\n import { Sheet, SheetContent, SheetTrigger, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\n import { Button } from \"@/components/ui/button\";\n+import { SearchDropdown } from \"@/components/SearchDropdown\";\n import { Menu, X, Globe, LifeBuoy, LogIn, UserPlus, ShoppingBag, User, Smartphone, LogOut } from \"lucide-react\";\n import { CurrencySelector } from \"@/components/CurrencySelector\";\n import { SignedIn, SignedOut, useClerk } from \"@clerk/nextjs\";\n@@ -14,17 +15,27 @@ import { useRouter } from \"next/navigation\";\n \n export function Navbar() {\n   const pathname = usePathname();\n+  const router = useRouter();\n   const [isOpen, setIsOpen] = useState(false);\n+  const [searchValue, setSearchValue] = useState(\"\");\n   const { isAdmin } = useIsAdmin();\n   const { signOut } = useClerk();\n-  const router = useRouter();\n \n   const handleSignOut = async () =\u003e {\n     setIsOpen(false);\n     await signOut();\n     router.push(\"/\");\n   };\n \n+  const handleSearch = (value: string) =\u003e {\n+    setSearchValue(value);\n+  };\n+\n+  const handleSearchSelect = (result: { code: string; name: string; type: number }) =\u003e {\n+    router.push(`/countries/${result.code}`);\n+    setSearchValue(\"\");\n+  };\n+\n   const navLinks = [\n     { name: \"eSIM Plans\", href: \"/\", icon: \u003cShoppingBag className=\"h-4 w-4\" /\u003e },\n     { name: \"Support\", href: \"/support\", icon: \u003cLifeBuoy className=\"h-4 w-4\" /\u003e },\n@@ -34,34 +45,49 @@ export function Navbar() {\n \n   return (\n     \u003cnav className=\"sticky top-0 z-50 bg-[var(--voyage-bg)]/80 backdrop-blur-md border-b border-[var(--voyage-border)]\"\u003e\n-      \u003cdiv className=\"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between\"\u003e\n-        {/* Logo */}\n-        \u003cLink href=\"/\" className=\"text-2xl font-bold tracking-tight text-[var(--voyage-accent)] flex items-center gap-2\"\u003e\n-          \u003cGlobe className=\"h-6 w-6\" /\u003e\n-          Voyage\n-        \u003c/Link\u003e\n-\n-        {/* Desktop Navigation */}\n-        \u003cdiv className=\"hidden md:flex items-center gap-8\"\u003e\n-          \u003cdiv className=\"flex items-center gap-6 text-sm font-medium\"\u003e\n-            {navLinks.map((link) =\u003e (\n-              \u003cLink\n-                key={link.href}\n-                href={link.href}\n-                className={`transition-colors flex items-center gap-2 ${\n-                  isActive(link.href)\n-                    ? \"text-[var(--voyage-accent)]\"\n-                    : \"text-[var(--voyage-muted)] hover:text-white\"\n-                }`}\n-              \u003e\n-                {link.name}\n-              \u003c/Link\u003e\n-            ))}\n+      \u003cdiv className=\"max-w-6xl mx-auto px-6 h-16\"\u003e\n+        {/* Desktop Layout - Grid with 3 equal columns */}\n+        \u003cdiv className=\"hidden md:grid grid-cols-3 items-center h-full\"\u003e\n+          {/* Left Section: Logo + Nav Links */}\n+          \u003cdiv className=\"flex items-center gap-8 justify-start\"\u003e\n+            \u003cLink href=\"/\" className=\"text-2xl font-bold tracking-tight text-[var(--voyage-accent)] flex items-center gap-2\"\u003e\n+              \u003cGlobe className=\"h-6 w-6\" /\u003e\n+              Voyage\n+            \u003c/Link\u003e\n+            \u003cdiv className=\"flex items-center gap-6 text-sm font-medium\"\u003e\n+              {navLinks.map((link) =\u003e (\n+                \u003cLink\n+                  key={link.href}\n+                  href={link.href}\n+                  className={`transition-colors flex items-center gap-2 ${\n+                    isActive(link.href)\n+                      ? \"text-[var(--voyage-accent)]\"\n+                      : \"text-[var(--voyage-muted)] hover:text-white\"\n+                  }`}\n+                \u003e\n+                  {link.name}\n+                \u003c/Link\u003e\n+              ))}\n+            \u003c/div\u003e\n           \u003c/div\u003e\n \n-          \u003cdiv className=\"h-6 w-px bg-[var(--voyage-border)]\" /\u003e\n+          {/* Center Section: Search Bar */}\n+          \u003cdiv className=\"flex items-center justify-center\"\u003e\n+            \u003cdiv className=\"w-64\"\u003e\n+              \u003cSearchDropdown\n+                value={searchValue}\n+                onChange={handleSearch}\n+                onSelect={handleSearchSelect}\n+                placeholder=\"Search countries...\"\n+                className=\"w-full\"\n+              /\u003e\n+            \u003c/div\u003e\n+          \u003c/div\u003e\n+\n+          {/* Right Section: Currency + User Menu */}\n+          \u003cdiv className=\"flex items-center gap-4 justify-end\"\u003e\n+            \u003cdiv className=\"h-6 w-px bg-[var(--voyage-border)]\" /\u003e\n \n-          \u003cdiv className=\"flex items-center gap-4\"\u003e\n             \u003cCurrencySelector /\u003e\n             \n             \u003cSignedOut\u003e\n@@ -86,16 +112,34 @@ export function Navbar() {\n           \u003c/div\u003e\n         \u003c/div\u003e\n \n-        {/* Mobile Menu Trigger */}\n-        \u003cdiv className=\"md:hidden flex items-center gap-4\"\u003e\n-          \u003cCurrencySelector /\u003e\n-          \u003cSheet open={isOpen} onOpenChange={setIsOpen}\u003e\n-            \u003cSheetTrigger asChild\u003e\n-              \u003cButton variant=\"ghost\" size=\"icon\" className=\"text-white hover:bg-[var(--voyage-bg-light)]\"\u003e\n-                \u003cMenu className=\"h-6 w-6\" /\u003e\n-              \u003c/Button\u003e\n-            \u003c/SheetTrigger\u003e\n-            \u003cSheetContent side=\"right\" className=\"bg-[var(--voyage-bg)] border-l border-[var(--voyage-border)] w-[300px]\"\u003e\n+        {/* Mobile Layout */}\n+        \u003cdiv className=\"md:hidden flex items-center justify-between h-full w-full\"\u003e\n+          \u003cLink href=\"/\" className=\"text-2xl font-bold tracking-tight text-[var(--voyage-accent)] flex items-center gap-2\"\u003e\n+            \u003cGlobe className=\"h-6 w-6\" /\u003e\n+            Voyage\n+          \u003c/Link\u003e\n+\n+          {/* Mobile Menu Trigger */}\n+          \u003cdiv className=\"flex items-center gap-4\"\u003e\n+            {/* Mobile Search */}\n+            \u003cdiv className=\"flex-1 max-w-xs\"\u003e\n+              \u003cSearchDropdown\n+                value={searchValue}\n+                onChange={handleSearch}\n+                onSelect={handleSearchSelect}\n+                placeholder=\"Search...\"\n+                className=\"w-full\"\n+              /\u003e\n+            \u003c/div\u003e\n+            \n+            \u003cCurrencySelector /\u003e\n+            \u003cSheet open={isOpen} onOpenChange={setIsOpen}\u003e\n+              \u003cSheetTrigger asChild\u003e\n+                \u003cButton variant=\"ghost\" size=\"icon\" className=\"text-white hover:bg-[var(--voyage-bg-light)]\"\u003e\n+                  \u003cMenu className=\"h-6 w-6\" /\u003e\n+                \u003c/Button\u003e\n+              \u003c/SheetTrigger\u003e\n+              \u003cSheetContent side=\"right\" className=\"bg-[var(--voyage-bg)] border-l border-[var(--voyage-border)] w-[300px]\"\u003e\n               \u003cSheetHeader className=\"text-left border-b border-[var(--voyage-border)] pb-4 mb-4\"\u003e\n                 \u003cSheetTitle className=\"text-[var(--voyage-accent)] text-xl font-bold flex items-center gap-2\"\u003e\n                   \u003cGlobe className=\"h-5 w-5\" /\u003e\n@@ -170,8 +214,9 @@ export function Navbar() {\n                   \u003c/SignedIn\u003e\n                 \u003c/div\u003e\n               \u003c/div\u003e\n-            \u003c/SheetContent\u003e\n-          \u003c/Sheet\u003e\n+              \u003c/SheetContent\u003e\n+            \u003c/Sheet\u003e\n+          \u003c/div\u003e\n         \u003c/div\u003e\n       \u003c/div\u003e\n     \u003c/nav\u003e"
    },
    {
        "sha":  "ea57337b8d0f7ca1438233ffc7b70cc0d5147f86",
        "filename":  "apps/web/components/NavigationUserMenu.tsx",
        "status":  "modified",
        "additions":  92,
        "deletions":  34,
        "changes":  126,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FNavigationUserMenu.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FNavigationUserMenu.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fcomponents%2FNavigationUserMenu.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -1,52 +1,110 @@\n \"use client\";\n \n-import { UserButton } from \"@clerk/nextjs\";\n+import { useState, useEffect } from \"react\";\n+import { UserButton, useUser } from \"@clerk/nextjs\";\n import {\n   User,\n   Shield,\n   LifeBuoy,\n   Smartphone,\n } from \"lucide-react\";\n+import { Badge } from \"@/components/ui/badge\";\n import { useIsAdmin } from \"@/hooks/useIsAdmin\";\n+import { safeFetch } from \"@/lib/safe-fetch\";\n \n export function NavigationUserMenu() {\n   const { isAdmin } = useIsAdmin();\n+  const { user } = useUser();\n+  const [esimCount, setEsimCount] = useState\u003cnumber | null\u003e(null);\n+  const email = user?.primaryEmailAddress?.emailAddress || \"\";\n+\n+  useEffect(() =\u003e {\n+    const fetchEsimCount = async () =\u003e {\n+      if (!email) return;\n+      \n+      try {\n+        const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3001/api\";\n+        const data = await safeFetch\u003cany[]\u003e(\n+          `${apiUrl}/user/esims?email=${encodeURIComponent(email)}`,\n+          { showToast: false }\n+        );\n+        setEsimCount(data?.length || 0);\n+      } catch (error) {\n+        console.error(\"Failed to fetch eSIM count:\", error);\n+        setEsimCount(0);\n+      }\n+    };\n+\n+    fetchEsimCount();\n+  }, [email]);\n \n   return (\n-    \u003cUserButton\n-      appearance={{\n-        elements: {\n-          avatarBox: \"w-8 h-8\",\n-        },\n-      }}\n-    \u003e\n-      \u003cUserButton.MenuItems\u003e\n-        \u003cUserButton.Link\n-          label=\"Account\"\n-          labelIcon={\u003cUser className=\"h-4 w-4\" /\u003e}\n-          href=\"/account\"\n-        /\u003e\n-\n-        \u003cUserButton.Link\n-          label=\"My eSIMs\"\n-          labelIcon={\u003cSmartphone className=\"h-4 w-4\" /\u003e}\n-          href=\"/my-esims\"\n-        /\u003e\n-\n-        \u003cUserButton.Link\n-          label=\"Support\"\n-          labelIcon={\u003cLifeBuoy className=\"h-4 w-4\" /\u003e}\n-          href=\"/support\"\n-        /\u003e\n-\n-        {isAdmin \u0026\u0026 (\n+    \u003cdiv className=\"flex items-center gap-2\"\u003e\n+      {esimCount !== null \u0026\u0026 esimCount \u003e 0 \u0026\u0026 (\n+        \u003cBadge \n+          variant=\"outline\" \n+          className=\"border-[var(--voyage-border)] bg-[var(--voyage-card)] text-[var(--voyage-muted)] text-xs\"\n+        \u003e\n+          \u003cSmartphone className=\"h-3 w-3 mr-1\" /\u003e\n+          {esimCount} eSIM{esimCount !== 1 ? \"s\" : \"\"}\n+        \u003c/Badge\u003e\n+      )}\n+      \n+      \u003cUserButton\n+        appearance={{\n+          baseTheme: \"dark\",\n+          elements: {\n+            avatarBox: \"w-8 h-8\",\n+            userButtonPopoverCard: \"bg-[var(--voyage-card)] border-[var(--voyage-border)] shadow-lg\",\n+            userButtonPopoverHeader: \"bg-[var(--voyage-card)] border-b border-[var(--voyage-border)] !bg-[var(--voyage-card)]\",\n+            userButtonPopoverHeaderTitle: \"!text-white text-white\",\n+            userButtonPopoverHeaderSubtitle: \"!text-[var(--voyage-muted)] text-[var(--voyage-muted)]\",\n+            userButtonPopoverActions: \"bg-[var(--voyage-card)] !bg-[var(--voyage-card)]\",\n+            userButtonPopoverActionButton: \"!text-white text-white hover:!bg-[var(--voyage-bg-light)] hover:bg-[var(--voyage-bg-light)] hover:!text-white hover:text-white\",\n+            userButtonPopoverActionButtonText: \"!text-white text-white\",\n+            userButtonPopoverActionButtonIcon: \"!text-[var(--voyage-muted)] text-[var(--voyage-muted)]\",\n+            userButtonPopoverFooter: \"!bg-[var(--voyage-card)] bg-[var(--voyage-card)] border-t border-[var(--voyage-border)] !text-[var(--voyage-muted)] text-[var(--voyage-muted)]\",\n+            userButtonPopoverFooterText: \"!text-[var(--voyage-muted)] text-[var(--voyage-muted)]\",\n+            userButtonPopoverActionButton__manageAccount: \"!text-white text-white hover:!bg-[var(--voyage-bg-light)] hover:bg-[var(--voyage-bg-light)] hover:!text-white hover:text-white\",\n+          },\n+          variables: {\n+            colorBackground: \"var(--voyage-card)\",\n+            colorText: \"white\",\n+            colorTextSecondary: \"var(--voyage-muted)\",\n+            colorInputBackground: \"var(--voyage-card)\",\n+            colorInputText: \"white\",\n+            colorPrimary: \"var(--voyage-accent)\",\n+          },\n+        }}\n+      \u003e\n+        \u003cUserButton.MenuItems\u003e\n+          \u003cUserButton.Link\n+            label=\"Account\"\n+            labelIcon={\u003cUser className=\"h-4 w-4\" /\u003e}\n+            href=\"/account\"\n+          /\u003e\n+\n           \u003cUserButton.Link\n-            label=\"Admin\"\n-            labelIcon={\u003cShield className=\"h-4 w-4\" /\u003e}\n-            href=\"/admin\"\n+            label=\"My eSIMs\"\n+            labelIcon={\u003cSmartphone className=\"h-4 w-4\" /\u003e}\n+            href=\"/my-esims\"\n           /\u003e\n-        )}\n-      \u003c/UserButton.MenuItems\u003e\n-    \u003c/UserButton\u003e\n+\n+          \u003cUserButton.Link\n+            label=\"Support\"\n+            labelIcon={\u003cLifeBuoy className=\"h-4 w-4\" /\u003e}\n+            href=\"/support\"\n+          /\u003e\n+\n+          {isAdmin \u0026\u0026 (\n+            \u003cUserButton.Link\n+              label=\"Admin\"\n+              labelIcon={\u003cShield className=\"h-4 w-4\" /\u003e}\n+              href=\"/admin\"\n+            /\u003e\n+          )}\n+        \u003c/UserButton.MenuItems\u003e\n+      \u003c/UserButton\u003e\n+    \u003c/div\u003e\n   );\n }"
    },
    {
        "sha":  "b87f7482f5cab7bb431d8318d21bb68906250b1b",
        "filename":  "apps/web/components/RecentlyViewed.tsx",
        "status":  "added",
        "additions":  65,
        "deletions":  0,
        "changes":  65,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FRecentlyViewed.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FRecentlyViewed.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fcomponents%2FRecentlyViewed.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -0,0 +1,65 @@\n+\"use client\";\n+\n+import { useState, useEffect } from \"react\";\n+import Link from \"next/link\";\n+import { Clock, X } from \"lucide-react\";\n+import { Button } from \"@/components/ui/button\";\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n+import { getRecentlyViewed, clearRecentlyViewed, RecentlyViewedItem } from \"@/lib/recently-viewed\";\n+\n+interface RecentlyViewedProps {\n+  maxItems?: number;\n+  className?: string;\n+}\n+\n+export function RecentlyViewed({ maxItems = 5, className }: RecentlyViewedProps) {\n+  const [items, setItems] = useState\u003cRecentlyViewedItem[]\u003e([]);\n+\n+  useEffect(() =\u003e {\n+    const recent = getRecentlyViewed();\n+    setItems(recent.slice(0, maxItems));\n+  }, [maxItems]);\n+\n+  const handleClear = () =\u003e {\n+    clearRecentlyViewed();\n+    setItems([]);\n+  };\n+\n+  if (items.length === 0) return null;\n+\n+  return (\n+    \u003cCard className={`bg-[var(--voyage-card)] border-[var(--voyage-border)] ${className}`}\u003e\n+      \u003cCardHeader\u003e\n+        \u003cdiv className=\"flex items-center justify-between\"\u003e\n+          \u003cdiv className=\"flex items-center gap-2\"\u003e\n+            \u003cClock className=\"h-5 w-5 text-[var(--voyage-accent)]\" /\u003e\n+            \u003cCardTitle className=\"text-white\"\u003eRecently Viewed\u003c/CardTitle\u003e\n+          \u003c/div\u003e\n+          \u003cButton\n+            variant=\"ghost\"\n+            size=\"sm\"\n+            onClick={handleClear}\n+            className=\"bg-transparent text-[var(--voyage-muted)] hover:text-white hover:bg-[var(--voyage-bg-light)] h-8 w-8 p-0 border-0\"\n+          \u003e\n+            \u003cX className=\"h-4 w-4\" /\u003e\n+          \u003c/Button\u003e\n+        \u003c/div\u003e\n+      \u003c/CardHeader\u003e\n+      \u003cCardContent\u003e\n+        \u003cdiv className=\"space-y-2\"\u003e\n+          {items.map((item) =\u003e (\n+            \u003cLink\n+              key={item.id}\n+              href={item.href}\n+              className=\"block p-2 rounded-lg hover:bg-[var(--voyage-bg-light)] transition-colors\"\n+            \u003e\n+              \u003cp className=\"text-sm text-white font-medium truncate\"\u003e{item.name}\u003c/p\u003e\n+            \u003c/Link\u003e\n+          ))}\n+        \u003c/div\u003e\n+      \u003c/CardContent\u003e\n+    \u003c/Card\u003e\n+  );\n+}\n+\n+"
    },
    {
        "sha":  "4d248bd1126ffbb99bfc1f73f251330787acf388",
        "filename":  "apps/web/components/SearchDropdown.tsx",
        "status":  "added",
        "additions":  190,
        "deletions":  0,
        "changes":  190,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FSearchDropdown.tsx",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fcomponents%2FSearchDropdown.tsx",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fcomponents%2FSearchDropdown.tsx?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -0,0 +1,190 @@\n+\"use client\";\n+\n+import { useState, useEffect, useRef } from \"react\";\n+import Link from \"next/link\";\n+import { Search, Globe, Loader2 } from \"lucide-react\";\n+import { cn } from \"@/lib/utils\";\n+import { safeFetch } from \"@/lib/safe-fetch\";\n+\n+interface SearchResult {\n+  code: string;\n+  name: string;\n+  type: number;\n+  locationLogo?: string;\n+}\n+\n+interface SearchDropdownProps {\n+  value: string;\n+  onChange: (value: string) =\u003e void;\n+  onSelect?: (result: SearchResult) =\u003e void;\n+  className?: string;\n+  placeholder?: string;\n+}\n+\n+export function SearchDropdown({ \n+  value, \n+  onChange, \n+  onSelect,\n+  onClose,\n+  className,\n+  placeholder = \"Search countries...\"\n+}: SearchDropdownProps) {\n+  const [results, setResults] = useState\u003cSearchResult[]\u003e([]);\n+  const [loading, setLoading] = useState(false);\n+  const [isOpen, setIsOpen] = useState(false);\n+  const [selectedIndex, setSelectedIndex] = useState(-1);\n+  const dropdownRef = useRef\u003cHTMLDivElement\u003e(null);\n+  const inputRef = useRef\u003cHTMLInputElement\u003e(null);\n+  const timeoutRef = useRef\u003cNodeJS.Timeout\u003e();\n+\n+  useEffect(() =\u003e {\n+    // Debounce search\n+    if (timeoutRef.current) {\n+      clearTimeout(timeoutRef.current);\n+    }\n+\n+    if (value.trim().length \u003c 2) {\n+      setResults([]);\n+      setIsOpen(false);\n+      return;\n+    }\n+\n+    setLoading(true);\n+    setIsOpen(true);\n+\n+    timeoutRef.current = setTimeout(async () =\u003e {\n+      try {\n+        const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3001/api\";\n+        const data = await safeFetch\u003c{ countries: SearchResult[] }\u003e(\n+          `${apiUrl}/search?q=${encodeURIComponent(value.trim())}`,\n+          { showToast: false }\n+        );\n+        setResults(data?.countries || []);\n+      } catch (error) {\n+        console.error(\"Search failed:\", error);\n+        setResults([]);\n+      } finally {\n+        setLoading(false);\n+      }\n+    }, 300);\n+\n+    return () =\u003e {\n+      if (timeoutRef.current) {\n+        clearTimeout(timeoutRef.current);\n+      }\n+    };\n+  }, [value]);\n+\n+  // Close dropdown when clicking outside\n+  useEffect(() =\u003e {\n+    const handleClickOutside = (event: MouseEvent) =\u003e {\n+      if (\n+        dropdownRef.current \u0026\u0026\n+        !dropdownRef.current.contains(event.target as Node) \u0026\u0026\n+        inputRef.current \u0026\u0026\n+        !inputRef.current.contains(event.target as Node)\n+      ) {\n+        setIsOpen(false);\n+        setSelectedIndex(-1);\n+      }\n+    };\n+\n+    document.addEventListener(\"mousedown\", handleClickOutside);\n+    return () =\u003e document.removeEventListener(\"mousedown\", handleClickOutside);\n+  }, []);\n+\n+  const handleSelect = (result: SearchResult) =\u003e {\n+    onChange(result.name);\n+    setIsOpen(false);\n+    setSelectedIndex(-1);\n+    if (onSelect) {\n+      onSelect(result);\n+    }\n+    if (onClose) {\n+      onClose();\n+    }\n+  };\n+\n+  const handleKeyDown = (e: React.KeyboardEvent) =\u003e {\n+    if (!isOpen || results.length === 0) return;\n+\n+    if (e.key === \"ArrowDown\") {\n+      e.preventDefault();\n+      setSelectedIndex((prev) =\u003e \n+        prev \u003c results.length - 1 ? prev + 1 : prev\n+      );\n+    } else if (e.key === \"ArrowUp\") {\n+      e.preventDefault();\n+      setSelectedIndex((prev) =\u003e (prev \u003e 0 ? prev - 1 : -1));\n+    } else if (e.key === \"Enter\" \u0026\u0026 selectedIndex \u003e= 0) {\n+      e.preventDefault();\n+      handleSelect(results[selectedIndex]);\n+    } else if (e.key === \"Escape\") {\n+      setIsOpen(false);\n+      setSelectedIndex(-1);\n+    }\n+  };\n+\n+  return (\n+    \u003cdiv className={cn(\"relative w-full\", className)}\u003e\n+      \u003cdiv className=\"relative\"\u003e\n+        \u003cSearch className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-[var(--voyage-muted)]\" /\u003e\n+        \u003cinput\n+          ref={inputRef}\n+          value={value}\n+          onChange={(e) =\u003e onChange(e.target.value)}\n+          onFocus={() =\u003e value.trim().length \u003e= 2 \u0026\u0026 setIsOpen(true)}\n+          onKeyDown={handleKeyDown}\n+          className=\"bg-[var(--voyage-bg-light)] border border-[var(--voyage-border)] rounded-lg pl-10 pr-3 py-2 w-full text-sm text-[var(--voyage-text)] placeholder-[var(--voyage-muted)] focus:ring-2 focus:ring-[var(--voyage-accent)] focus:border-transparent outline-none transition-all\"\n+          placeholder={placeholder}\n+        /\u003e\n+        {loading \u0026\u0026 (\n+          \u003cLoader2 className=\"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 animate-spin text-[var(--voyage-muted)]\" /\u003e\n+        )}\n+      \u003c/div\u003e\n+\n+      {isOpen \u0026\u0026 (results.length \u003e 0 || loading) \u0026\u0026 (\n+        \u003cdiv\n+          ref={dropdownRef}\n+          className=\"absolute top-full left-0 right-0 mt-1 bg-[var(--voyage-card)] border border-[var(--voyage-border)] rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto\"\n+        \u003e\n+          {loading ? (\n+            \u003cdiv className=\"p-4 text-center text-[var(--voyage-muted)] text-sm\"\u003e\n+              Searching...\n+            \u003c/div\u003e\n+          ) : results.length === 0 ? (\n+            \u003cdiv className=\"p-4 text-center text-[var(--voyage-muted)] text-sm\"\u003e\n+              No results found\n+            \u003c/div\u003e\n+          ) : (\n+            \u003cdiv className=\"py-2\"\u003e\n+              {results.map((result, index) =\u003e (\n+                \u003cLink\n+                  key={result.code}\n+                  href={`/countries/${result.code}`}\n+                  onClick={() =\u003e handleSelect(result)}\n+                  className={cn(\n+                    \"flex items-center gap-3 px-4 py-2 hover:bg-[var(--voyage-bg-light)] transition-colors cursor-pointer\",\n+                    selectedIndex === index \u0026\u0026 \"bg-[var(--voyage-bg-light)]\"\n+                  )}\n+                \u003e\n+                  {result.locationLogo ? (\n+                    \u003cimg\n+                      src={result.locationLogo}\n+                      alt={result.name}\n+                      className=\"w-6 h-4 object-cover rounded\"\n+                    /\u003e\n+                  ) : (\n+                    \u003cGlobe className=\"h-4 w-4 text-[var(--voyage-muted)]\" /\u003e\n+                  )}\n+                  \u003cspan className=\"text-sm text-white flex-1\"\u003e{result.name}\u003c/span\u003e\n+                \u003c/Link\u003e\n+              ))}\n+            \u003c/div\u003e\n+          )}\n+        \u003c/div\u003e\n+      )}\n+    \u003c/div\u003e\n+  );\n+}\n+"
    },
    {
        "sha":  "2a9908a5e0266e19943d424715e2b1dc5a444014",
        "filename":  "apps/web/hooks/useKeyboardNavigation.ts",
        "status":  "added",
        "additions":  95,
        "deletions":  0,
        "changes":  95,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fhooks%2FuseKeyboardNavigation.ts",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Fhooks%2FuseKeyboardNavigation.ts",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Fhooks%2FuseKeyboardNavigation.ts?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -0,0 +1,95 @@\n+\"use client\";\n+\n+import { useEffect, useCallback } from \"react\";\n+import { useRouter, usePathname } from \"next/navigation\";\n+\n+interface KeyboardShortcut {\n+  key: string;\n+  ctrlKey?: boolean;\n+  shiftKey?: boolean;\n+  altKey?: boolean;\n+  action: () =\u003e void;\n+  description?: string;\n+}\n+\n+export function useKeyboardNavigation(shortcuts: KeyboardShortcut[]) {\n+  const router = useRouter();\n+  const pathname = usePathname();\n+\n+  useEffect(() =\u003e {\n+    const handleKeyDown = (e: KeyboardEvent) =\u003e {\n+      // Don\u0027t trigger shortcuts when user is typing in input/textarea\n+      const target = e.target as HTMLElement;\n+      if (\n+        target.tagName === \"INPUT\" ||\n+        target.tagName === \"TEXTAREA\" ||\n+        target.isContentEditable\n+      ) {\n+        return;\n+      }\n+\n+      shortcuts.forEach((shortcut) =\u003e {\n+        const keyMatch = e.key.toLowerCase() === shortcut.key.toLowerCase();\n+        const ctrlMatch = shortcut.ctrlKey === undefined ? true : e.ctrlKey === shortcut.ctrlKey;\n+        const shiftMatch = shortcut.shiftKey === undefined ? true : e.shiftKey === shortcut.shiftKey;\n+        const altMatch = shortcut.altKey === undefined ? true : e.altKey === shortcut.altKey;\n+\n+        if (keyMatch \u0026\u0026 ctrlMatch \u0026\u0026 shiftMatch \u0026\u0026 altMatch) {\n+          e.preventDefault();\n+          shortcut.action();\n+        }\n+      });\n+    };\n+\n+    window.addEventListener(\"keydown\", handleKeyDown);\n+    return () =\u003e window.removeEventListener(\"keydown\", handleKeyDown);\n+  }, [shortcuts]);\n+}\n+\n+// Common keyboard shortcuts\n+export function useCommonKeyboardShortcuts() {\n+  const router = useRouter();\n+  const pathname = usePathname();\n+\n+  useKeyboardNavigation([\n+    {\n+      key: \"k\",\n+      ctrlKey: true,\n+      action: () =\u003e {\n+        // Focus search bar\n+        const searchInput = document.querySelector(\u0027input[placeholder*=\"Search\"]\u0027) as HTMLInputElement;\n+        if (searchInput) {\n+          searchInput.focus();\n+          searchInput.select();\n+        }\n+      },\n+      description: \"Focus search\",\n+    },\n+    {\n+      key: \"h\",\n+      ctrlKey: true,\n+      action: () =\u003e {\n+        router.push(\"/\");\n+      },\n+      description: \"Go to home\",\n+    },\n+    {\n+      key: \"m\",\n+      ctrlKey: true,\n+      action: () =\u003e {\n+        router.push(\"/my-esims\");\n+      },\n+      description: \"Go to My eSIMs\",\n+    },\n+    {\n+      key: \"a\",\n+      ctrlKey: true,\n+      action: () =\u003e {\n+        router.push(\"/account\");\n+      },\n+      description: \"Go to Account\",\n+    },\n+  ]);\n+}\n+\n+"
    },
    {
        "sha":  "c0536ab51c1962e79e304fa69f5a447eeeb16f5a",
        "filename":  "apps/web/lib/recently-viewed.ts",
        "status":  "added",
        "additions":  58,
        "deletions":  0,
        "changes":  58,
        "blob_url":  "https://github.com/EzzaWan/Voyage/blob/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Flib%2Frecently-viewed.ts",
        "raw_url":  "https://github.com/EzzaWan/Voyage/raw/8df16105757c8b702cd237c505c45ba50a89cbaa/apps%2Fweb%2Flib%2Frecently-viewed.ts",
        "contents_url":  "https://api.github.com/repos/EzzaWan/Voyage/contents/apps%2Fweb%2Flib%2Frecently-viewed.ts?ref=8df16105757c8b702cd237c505c45ba50a89cbaa",
        "patch":  "@@ -0,0 +1,58 @@\n+\"use client\";\n+\n+const RECENTLY_VIEWED_KEY = \"voyage_recently_viewed\";\n+const MAX_ITEMS = 10;\n+\n+export interface RecentlyViewedItem {\n+  id: string;\n+  name: string;\n+  href: string;\n+  image?: string;\n+  viewedAt: number;\n+}\n+\n+export function addToRecentlyViewed(item: Omit\u003cRecentlyViewedItem, \"viewedAt\"\u003e) {\n+  if (typeof window === \"undefined\") return;\n+\n+  try {\n+    const existing = getRecentlyViewed();\n+    \n+    // Remove if already exists\n+    const filtered = existing.filter((i) =\u003e i.id !== item.id);\n+    \n+    // Add to beginning\n+    const updated = [\n+      { ...item, viewedAt: Date.now() },\n+      ...filtered,\n+    ].slice(0, MAX_ITEMS);\n+\n+    localStorage.setItem(RECENTLY_VIEWED_KEY, JSON.stringify(updated));\n+  } catch (error) {\n+    console.error(\"Failed to save recently viewed:\", error);\n+  }\n+}\n+\n+export function getRecentlyViewed(): RecentlyViewedItem[] {\n+  if (typeof window === \"undefined\") return [];\n+\n+  try {\n+    const data = localStorage.getItem(RECENTLY_VIEWED_KEY);\n+    if (!data) return [];\n+    \n+    const items = JSON.parse(data) as RecentlyViewedItem[];\n+    // Sort by viewedAt (most recent first) and limit\n+    return items\n+      .sort((a, b) =\u003e b.viewedAt - a.viewedAt)\n+      .slice(0, MAX_ITEMS);\n+  } catch (error) {\n+    console.error(\"Failed to get recently viewed:\", error);\n+    return [];\n+  }\n+}\n+\n+export function clearRecentlyViewed() {\n+  if (typeof window === \"undefined\") return;\n+  localStorage.removeItem(RECENTLY_VIEWED_KEY);\n+}\n+\n+"
    }
]
